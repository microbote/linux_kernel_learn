[2025-08-01 15:37:19.233071]  --- 启动测试 ---

[2025-08-01 15:37:19.233309]
[主线程] 测试 线程 1 (正常完成)。

[2025-08-01 15:37:19.233574]  线程 1: 启动。

[2025-08-01 15:37:19.233717]  线程 1: 尝试获取互斥量。

[2025-08-01 15:37:19.233781]  线程 1: 已获取互斥量。

[2025-08-01 15:37:19.233840]  线程 1: 尝试分配动态内存 (100字节)。

[2025-08-01 15:37:19.233978]  线程 1: 动态内存分配成功 @ 140540590951280。

[2025-08-01 15:37:19.234095]  线程 1: 工作中 (模拟 sleep 1秒)。

[2025-08-01 15:37:20.234320]  线程 1: 正常完成任务。

[2025-08-01 15:37:20.234551]  线程 1: 显式释放动态内存 @ 140540590951280。

[2025-08-01 15:37:20.234675]  线程 1: 显式解锁互斥量。

[2025-08-01 15:37:20.234738]  线程 1: 所有清理工作完成，线程退出。

[2025-08-01 15:37:20.234859]  [主线程] 线程 1 结束，返回状态: 0

[2025-08-01 15:37:20.234867]
[主线程] 测试 线程 2 (模拟内存分配失败提前退出)。

[2025-08-01 15:37:20.234970]  线程 2: 启动。

[2025-08-01 15:37:20.235033]  线程 2: 尝试获取互斥量。

[2025-08-01 15:37:20.235113]  线程 2: 已获取互斥量。

[2025-08-01 15:37:20.235173]  线程 2: 尝试分配动态内存 (100字节)。

[2025-08-01 15:37:20.235232]  线程 2: 错误：内存分配失败！

[2025-08-01 15:37:20.235289]  线程 2: 显式解锁互斥量。

[2025-08-01 15:37:20.235346]  线程 2: 所有清理工作完成，线程退出。

[2025-08-01 15:37:20.235412]  [主线程] 线程 2 结束，返回状态: 1

[2025-08-01 15:37:20.235417]
[主线程] 测试 线程 3 (取消点被取消)。

[2025-08-01 15:37:20.235474]  线程 3: 启动。

[2025-08-01 15:37:20.235534]  线程 3: 尝试获取互斥量。

[2025-08-01 15:37:20.235591]  线程 3: 已获取互斥量。

[2025-08-01 15:37:20.235665]  线程 3: 尝试分配动态内存 (100字节)。

[2025-08-01 15:37:20.235725]  线程 3: 动态内存分配成功 @ 140540590951280。

[2025-08-01 15:37:20.235791]  线程 3: 工作中 (模拟 sleep 5秒)。

[2025-08-01 15:37:21.235592]  [主线程] 发送取消请求给线程 3。

[2025-08-01 15:37:21.236424]      [Cleanup Handler 2] 正在执行: 释放动态分配内存 @ 140540590951280！

[2025-08-01 15:37:21.236581]      [Cleanup Handler 1] 正在执行: 解锁互斥量！

[2025-08-01 15:37:21.236750]  [主线程] 线程 3 被成功取消 (返回值：PTHREAD_CANCELED)。

[2025-08-01 15:37:21.236761]
--- 测试结束 ---

